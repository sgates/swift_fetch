# Implementation Plan

- [x] 1. Set up Swift Package Manager project structure
  - Create Package.swift manifest with executable target
  - Define project structure with Sources and Tests directories
  - Add swift-check as a test dependency
  - _Requirements: 5.1, 5.2_

- [x] 2. Expand SystemInfo data model with all new fields
  - [x] 2.1 Update SystemInfo struct to include all 21 fields
    - Add osBuild, architecture, hostModel fields for OS/hardware details
    - Add kernel, uptime, packages, shell fields for system environment
    - Add resolution, de, wm, wmTheme fields for display configuration
    - Add terminal, terminalFont fields for terminal environment
    - Add gpuModel, memoryUsed, memoryTotal fields for hardware resources
    - Update isEmpty computed property to check critical fields only
    - _Requirements: 1.2, 1.3, 1.4, 1.5, 1.6, 1.7, 1.8, 1.9, 1.10, 1.11, 1.12, 1.13, 1.14, 1.15, 1.16, 1.17_

- [x] 3. Expand SystemInfoCollector with new retrieval methods
  - [x] 3.1 Update getOSInfo() to return build number and architecture
    - Use ProcessInfo for OS version
    - Use sysctl or uname for build number
    - Use uname for architecture (arm64/x86_64)
    - _Requirements: 1.2_
  - [x] 3.2 Implement getHostModel() for hardware model identifier
    - Use sysctl hw.model to get Mac model identifier (e.g., Mac15,11)
    - _Requirements: 1.3_
  - [x] 3.3 Implement getKernel() for kernel version
    - Use uname -r or ProcessInfo to get kernel version
    - _Requirements: 1.7_
  - [x] 3.4 Implement getUptime() for system uptime
    - Use sysctl kern.boottime to calculate uptime
    - Format as "X days, Y hours, Z mins"
    - _Requirements: 1.8_
  - [x] 3.5 Implement getPackages() for Homebrew package count
    - Execute "brew list" and count lines
    - Return "N (brew)" format
    - Handle case where Homebrew is not installed
    - _Requirements: 1.9_
  - [x] 3.6 Implement getShell() for shell name and version
    - Use SHELL environment variable for shell path
    - Parse shell name and version from --version output
    - _Requirements: 1.10_
  - [x] 3.7 Implement getResolution() for screen resolution
    - Use CoreGraphics API to get main display resolution
    - Format as "WIDTHxHEIGHT"
    - _Requirements: 1.11_
  - [x] 3.8 Implement getDE() for desktop environment
    - Return "Aqua" (standard for macOS)
    - _Requirements: 1.12_
  - [x] 3.9 Implement getWM() for window manager
    - Return "Quartz Compositor" (standard for macOS)
    - _Requirements: 1.13_
  - [x] 3.10 Implement getWMTheme() for window manager theme
    - Read system appearance preference (Light/Dark mode)
    - Use UserDefaults or AppleScript to detect theme
    - Format as "Blue (Light)" or "Blue (Dark)"
    - _Requirements: 1.14_
  - [x] 3.11 Implement getTerminal() for terminal application name
    - Use TERM_PROGRAM environment variable
    - Fallback to parsing parent process name
    - _Requirements: 1.15_
  - [x] 3.12 Implement getTerminalFont() for terminal font info
    - Attempt to read from terminal-specific environment variables
    - Return "Unknown" if not detectable
    - _Requirements: 1.16_
  - [x] 3.13 Implement getGPUModel() for GPU information
    - Use system_profiler SPDisplaysDataType or Metal API
    - Parse GPU model name
    - _Requirements: 1.6_
  - [x] 3.14 Implement getMemoryInfo() for memory usage
    - Use sysctl or vm_stat to get memory statistics
    - Calculate used and total memory in MiB
    - Format as "USED MiB / TOTAL MiB"
    - _Requirements: 1.17_
  - [x] 3.15 Update collect() method to gather all new information
    - Call all new retrieval methods
    - Apply fallback values for any failures
    - Return comprehensive SystemInfo struct
    - _Requirements: 1.2, 1.3, 1.4, 1.5, 1.6, 1.7, 1.8, 1.9, 1.10, 1.11, 1.12, 1.13, 1.14, 1.15, 1.16, 1.17, 4.1, 4.2_
  - [ ]* 3.16 Write property test for comprehensive system information completeness
    - **Property 1: Comprehensive system information completeness**
    - **Validates: Requirements 1.2, 1.3, 1.4, 1.5, 1.6, 1.7, 1.8, 1.9, 1.10, 1.11, 1.12, 1.13, 1.14, 1.15, 1.16, 1.17, 4.1**
  - [ ]* 3.17 Write property test for fallback on retrieval errors
    - **Property 7: Fallback on retrieval errors**
    - **Validates: Requirements 4.3**

- [x] 4. Implement ColorFormatter for ANSI color support
  - [x] 4.1 Create ANSIColor enum and ColorFormatter class
    - Define ANSIColor enum with standard ANSI escape codes
    - Implement colorize() method to wrap text with color codes
    - Implement formatLabel() and formatValue() with distinct colors
    - Implement formatInfoLine() to format label-value pairs
    - _Requirements: 2.1, 2.2, 2.3, 2.4_
  - [ ]* 4.2 Write property test for color code application
    - **Property 2: Color code application**
    - **Validates: Requirements 2.1, 2.3, 3.3**
  - [ ]* 4.3 Write property test for color reset
    - **Property 3: Color reset prevents bleeding**
    - **Validates: Requirements 2.4**
  - [ ]* 4.4 Write property test for label and value color distinction
    - **Property 4: Label and value color distinction**
    - **Validates: Requirements 2.2**
  - [ ]* 4.5 Write property test for information formatting consistency
    - **Property 5: Information formatting consistency**
    - **Validates: Requirements 6.1, 6.2**

- [x] 5. Implement ASCIIArtProvider for ASCII art rendering
  - [x] 5.1 Create ASCIIArtProvider class with art generation
    - Implement getMacOSArt() with default Apple/macOS ASCII art
    - Implement colorizeArt() to apply colors to art lines
    - _Requirements: 3.1, 3.3, 3.4_
  - [ ]* 5.2 Write unit tests for ASCII art provider
    - Test getMacOSArt() returns non-empty array
    - Test colorizeArt() applies colors to all lines
    - _Requirements: 3.3, 3.4_

- [x] 6. Update DisplayRenderer to handle expanded system info
  - [x] 6.1 Update render() method to display all new fields
    - Format and display all 21 system information fields
    - Organize fields in logical grouping (OS, hardware, display, etc.)
    - Ensure proper alignment with ASCII art
    - _Requirements: 1.1, 3.1, 3.2, 6.1, 6.2, 6.3, 6.4_
  - [ ]* 6.2 Write property test for art and info alignment
    - **Property 6: Art and info alignment without overlap**
    - **Validates: Requirements 3.2, 6.3**
  - [ ]* 6.3 Write unit tests for display renderer
    - Test combineArtAndInfo() alignment logic with more info lines
    - Test handling of mismatched line counts
    - _Requirements: 3.2, 6.3_

- [x] 7. Update main entry point for expanded functionality
  - [x] 7.1 Verify main.swift works with expanded SystemInfo
    - Ensure all new fields are collected and displayed
    - Verify output matches expected format
    - _Requirements: 1.1, 4.4, 5.4_
  - [ ]* 7.2 Write integration test for end-to-end execution
    - Test complete tool execution produces expected output
    - Verify output contains ASCII art and all system information fields
    - Verify tool completes without errors
    - _Requirements: 1.1, 4.4_

- [ ]* 8. Checkpoint - Ensure all tests pass
  - Ensure all tests pass, ask the user if questions arise.
